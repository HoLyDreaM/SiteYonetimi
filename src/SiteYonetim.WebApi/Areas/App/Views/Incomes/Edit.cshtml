@model SiteYonetim.WebApi.Areas.App.Controllers.EditIncomeModel
@{
    ViewData["Title"] = "Gelir Düzenle";
    var income = ViewBag.Income as SiteYonetim.Domain.Entities.Income;
    var monthNames = new[] { "", "Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık" };
}
<h1 class="h3 mb-4">Gelir Düzenle</h1>
@if (income != null)
{
    <p class="text-muted mb-3">
        @if (income.Type == SiteYonetim.Domain.Entities.IncomeType.Aidat)
        { <span class="badge bg-primary">Aidat</span> }
        else if (income.Type == SiteYonetim.Domain.Entities.IncomeType.ExtraCollection)
        { <span class="badge bg-info">Özel Toplama</span> }
        else
        { <span class="badge bg-secondary">Diğer</span> }
        — @(income.Apartment?.BlockOrBuildingName ?? "-") / @(income.Apartment?.ApartmentNumber ?? "-") — @Model.Year @monthNames[Model.Month]
    </p>
}
@if (!ViewData.ModelState.IsValid)
{
    <div asp-validation-summary="All" class="alert alert-danger text-dark mb-3" role="alert"></div>
}
<form asp-area="App" asp-controller="Incomes" asp-action="Edit" method="post">
    <input type="hidden" asp-for="Id" />
    <input type="hidden" asp-for="Type" />
    <input type="hidden" asp-for="Year" />
    <input type="hidden" asp-for="Month" />
    <div class="card border-0 shadow-sm">
        <div class="card-body">
            <div class="row g-3">
                <div class="col-md-6">
                    <label asp-for="Amount" class="form-label">Tutar (₺) *</label>
                    <input asp-for="Amount" type="number" step="0.01" min="0.01" class="form-control" required />
                    <span asp-validation-for="Amount" class="text-danger small"></span>
                </div>
                @if (Model.Type == SiteYonetim.Domain.Entities.IncomeType.ExtraCollection)
                {
                    <div class="col-12">
                        <label asp-for="Description" class="form-label">Açıklama *</label>
                        <input asp-for="Description" class="form-control" required />
                        <span asp-validation-for="Description" class="text-danger small"></span>
                    </div>
                }
                <div class="col-md-6">
                    <label asp-for="PaymentStartDate" class="form-label">Ödeme Başlangıç</label>
                    <input asp-for="PaymentStartDate" type="date" class="form-control" />
                </div>
                <div class="col-md-6">
                    <label asp-for="PaymentEndDate" class="form-label">Ödeme Bitiş</label>
                    <input asp-for="PaymentEndDate" type="date" class="form-control" />
                </div>
                <div class="col-md-6">
                    <label asp-for="DueDate" class="form-label">Vade Tarihi</label>
                    <input asp-for="DueDate" type="date" class="form-control" />
                </div>
            </div>
        </div>
        <div class="card-footer bg-transparent border-0">
            <button type="submit" class="btn btn-primary">Güncelle</button>
            @if (income != null)
            {
                <a asp-action="Index" asp-route-siteId="@income.SiteId" asp-route-year="@Model.Year" asp-route-month="@Model.Month" class="btn btn-secondary">İptal</a>
            }
        </div>
    </div>
</form>
